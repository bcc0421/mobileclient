<!--
  Generated template for the NewperPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>{{showtype=='0'?'请假':'换班'}}通知</ion-title>
    <ion-buttons right>
      <button ion-button full (click)="dismiss()">
            关闭
        </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content>
  <div class="nologmessage" *ngIf="msglistTs.length==0"><ion-icon name="xiaoxi"></ion-icon> 暂时没有通知</div>
  <ion-list no-lines>
    <ng-container *ngFor="let msg of msglistTs">
      <ion-card>
        <ion-item>
          <ion-avatar item-start>
            <img src="{{native.appServer.node}}person/personPic?pid={{msg._id}}">
          </ion-avatar>
          <b class="imread imread_qj_panl" *ngIf="msg.cl=='0'"></b>
          <h2>{{msg.name}}</h2>
          <p *ngIf="msg.status=='0'">{{showtype=='0'?'请假':'换班'}}时间：{{totime(msg.starttime)}}</p>
          <p *ngIf="msg.status=='0'"><span style="visibility:hidden">用来占位：</span>{{totime(msg.endtime)}}</p>
        </ion-item>
        <ion-card-content>
          <p *ngIf="msg.status=='0'">{{ msg.message }}</p>
          <p *ngIf="msg.status=='1'">{{ msg.cljg }}了您的{{showtype=='0'?'请假':'换班'}}申请</p>
          <p *ngIf="msg.cl=='1'">(已{{msg.cljg}})</p>
        </ion-card-content>

        <ion-row *ngIf="msg.status=='0'">
          <ion-col *ngIf="msg.cl=='0'">
            <button (click)="approve(msg,1)" ion-button center clear full>
              <div>同意</div>
            </button>
          </ion-col>
          <ion-col *ngIf="msg.cl=='0'">
            <button (click)="approve(msg,0)" ion-button center clear full>
              <div>拒绝</div>
            </button>
          </ion-col>
        </ion-row>
      </ion-card>
    </ng-container>
  </ion-list>
</ion-content>